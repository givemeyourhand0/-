#### 1、SQL标准的事务隔离级别

- read uncommitted读取未提交内容，也叫脏读

- read commited读取提交内容，支持不可重复读

- repeatable read可重复读（MYSQL的默认事务隔离级别），可能会出现幻影读。InnoDB和Falcon存储引擎通过多版本并发控制(MVCC，Multiversion Concurrency Control)机制解决了该问题。

- serializable串行化，强制事务排序，使之不可能出现相互冲突

- 不可重复度和幻影读的区别？

  - 不可重复读的重点是修改:

    同样的条件, 你读取过的数据, 再次读取出来发现值不一样了，避免不可重复读需要锁住某一数据行。

  - 幻读的重点在于新增或者删除

    同样的条件, 第1次和第2次读出来的记录数不一样，避免幻影读需要锁住满足条件的行和相近的记录。

![事务隔离级别](E:\笔记\笔试面试记录\图片\事务隔离级别.jpg)

#### 2、mysql索引分类

> 哈希索引、B+Tree索引、空间索引、全文索引。

- 1、哈希索引

  - 适用场景：对精确匹配索引所有列的查询才有效。
  - 优势：因为索引本身只包含哈希值和行指针，而不存储字段值，所以哈希索引的结构很紧凑，这也让哈希索引查找的速度非常快。在合适的场合使用性能提升非常明显。
  - 劣势：
    - 因为哈希索引本身不存储数据行，所以无法避免地需要读取数据行，不过访问内存中的数据行会很快，所以这一点对性能影响不明显。
    - 因为是按哈希值排序的，所以索引值是无序的，所以无法实现排序功能。
    - 不支持部分索引列的匹配，因为建立索引时哈希值是根据全部索引列的内容计算的。
    - 只支持等值比较查询，不支持范围查询。
    - 出现哈希冲突时，需要遍历链表中的所有行指针，然后读取数据，逐行进行比较直到找到符合条件的行。
    - 哈希冲突很多，对数据行删除时，存储引擎需要遍历链表，找到并删除对应行的引用，代价较大。
  - InnoDB中有个自适应哈希索引，当InnoDB注意到某些索引值被使用的非常频繁时，它会在内存中B-Tree索引之上再创建一个哈希索引，这样让B-Tree索引也具有一些哈希索引的特点。
  - 不支持哈希索引的存储引擎，也可以创建自定义哈希索引，比如对较长的URL进行查询，相比于直接对URL建立索引，更好的一种方案就是对URL进行CRC32哈希（使用触发器维护哈希值）。

- 2、B+Tree索引

  > 实际上大部分存储引擎使用的是B+树索引，相比B-树，它在叶子节点维护了一个指针链，从而方便叶子节点的范围遍历。而且B+树的非叶子结点只存储指向孩子节点的指针，不存储指向数据的指针，所以相同的存储空间存储的结点更多。
  >
  > MYSQL中的B+树索引可以分为**聚集索引**和**辅助索引**，两者不同的是，叶子节点是否是一整行的信息。
  >
  > 不同的存储引擎使用B+Tree索引的方式也不同：
  >
  > - 比如MyISAM索引使用前缀压缩技术使得索引更小，而InnoDB则按照原数据格式进行存储。
  > - 再比如MyISAM索引通过数据的物理位置引用被索引的行，而InnoDB则根据主键引用被索引的行。

  - 适用场景：
    - **全键值，键值范围或键前缀查找**。比如全值匹配、匹配最左前缀、匹配列前缀、匹配范围值、精确匹配某一列并范围匹配另外一列、只访问索引的查询（覆盖索引）。
    - 还可以用于查询中的ORDER BY操作。
  - 劣势：
    - 如果不是按照索引的最左列开始查找，则无法使用索引。
    - 不能跳过索引中的列。
    - 如果查询中有某个列的范围查询，则其右边所有列都无法使用索引优化查找。

- 3、空间索引（R-Tree）

  - 空间索引会从所有维度来索引数据，查询时，可以有效地使用任意维度来组合查询。

- 4、全文索引

  - 全文检索通常使用倒排索引（inverted index）来实现。它在辅助表中存储了单词与单词自身在一个或多个文档中所在位置之间的映射。

    inverted file index表现形式为{单词，单词所在文档的id}

    full inverted index表现形式为{单词，（单词所在文档的id，在文档中具体的位置）}

#### 3、mysql索引优点

- 1、大大减少服务器需要扫描的数据量（快速定位到表的指定位置，某些查询甚至只使用覆盖索引）
- 2、帮助服务器避免排序和临时表（比如ORDER BY或GROUP BY）
- 3、将随机IO变为顺序IO

####4、mysql优化（百度脑图）

#### 5、ACID

####6、mysql锁

- S锁共享锁，读锁
- X锁排他锁，写锁