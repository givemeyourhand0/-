#### 1、进程和线程

> 参考：http://blog.csdn.net/zheng548/article/details/54669908
>
> 回答这个问题的思路：为什么要有进程-->为什么要有线程-->进程与线程的区别，从定义、角色、资源共享、独立性和开销方面比较。

- 为什么要有进程？

  最开始的计算机是串行运行程序的，只存在一个程序计数器，一个程序执行完毕，才会执行下一个程序。这样明显不能满足同时干很多事的需求，于是引入了进程的概念。

- 为什么要有线程？

  为什么引入线程 有了进程这概念之后 应用程序可以并发地去执行了 那么为什么要在进程当中再派生出线程呢？进程有以下几个缺点：

  - 进程切换的开销比较大。
  - 有时候需要在一个进程中执行多个程序，实现不同的功能。
  - 进程有时候性能比较低。

  引入线程有哪些优点呢?

  - 同一应用（进程）需要实现多个功能（线程）。
  - 性能考虑，多个线程的功能不同，可以在多个处理器上同时执行。
  - 开销考虑，在进程内创建、终止线程比创建、终止进程要快。同一进程内的线程间切换比进程间的切换要快,尤其是用户级线程间的切换。线程之间相互通信无须通过内核（同一进程内的线程共享内存和文件）。

  - 比较

    - 定义上：进程是某个数据集合上的一次运行活动；线程是进程内的一个执行路径。
    - 角色：进程是OS分配资源的基本单位；线程是CPU调度的基本单位。
    - 资源共享方面：进程间无法共享资源，而线程共享所在进程的地址空间和其他资源。同时线程还有自己的栈和栈指针，程序计数器等寄存器。
    - 独立性：进程有自己的地址空间，线程没有，线程必须依附于进程而存在。
    - 开销：进程切换的开销比骄大，线程现对较小。

#### 2、进程间通信

- **管道**，半双工的，数据只能单向流动，而且只能在父子进程间使用。
- **有名管道**，也是半双工，但是允许无亲缘关系进程间的通信。
- **信号量**，信号量是一个计数器，可以用来控制多个进程对共享资源的访问。它常作为一种锁机制，防止某进程正在访问共享资源时，其他进程也访问该资源。因此，主要作为进程间以及同一进程内不同线程之间的同步手段。
- **消息队列**，消息队列是由消息的链表，存放在内核中并由消息队列标识符标识。消息队列克服了信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。
- **信号**， 信号是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。
- **共享内存**，共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问。
- **套接字** ，套解口也是一种进程间通信机制，与其他通信机制不同的是，它可用于不同主机间及其间的进程通信。

#### 3、信号量的优缺点

- 优：PV操作能够实现对临界区的管理要求；实现简单；允许使用它的代码休眠，持有锁的时间可相对较。
- 缺：一个信号量只能置一次初值，以后只能对之进行p操作或v操作。

#### 4、如何理解线程安全？

- 当多个线程访问一个对象时，如果不用考虑这些线程在运行时环境下的调度和交替执行，也不需要进行额外的同步，调用这个对象的行为都可以获得正确的结果，那么这个对象是线程安全的。