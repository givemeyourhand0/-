##### 1、TCP首部。

- IP数据报（IP首部+TCP报文段（TCP首部+TCP数据））
- TCP首部，5*32位
  - 16源端口号+16目的端口号，用于寻找发送端和接收端的应用进程，加上IP首部的源端IP及终端IP，唯一的确认一个TCP连接。
  - 32位序号：标识发送的数据字节流，标识在这个报文段中的第一个数据字节。
  - 32位确认序号：ACK为1时有效，上次成功收到的数据字节序号+1（如接收到的为1024--2048，则返回2049）。
  - 4位首部长度：首部中32bits字的数目，TCP最多有60字节的长度，除去任选字段，正常为20字节。
  - 6bits：URG紧急指针；ACK确认序号有效；PSH接收方应尽快将此报文段交给应用层；RST重建连接；SYN同步序号，用来发起一个新连接；FIN发端完成发送任务。
  - 16位窗口大小：TCP流量控制，字节数，起始于确认序列号指明的值，接收端期望收到的字节，最大为65535.
  - 16位检验和：包括计算TCP首部和数据综合的二进制反码和检验和。
  - 16位紧急指针：URG为1时有效，正向的偏移量，加上序号字段值表示最后一个字节的序号。

##### 2、TCP为什么是可靠的？三次握手四次挥手？

- **面向连接：**意味着两个使用TCP的应用（通常是一个客户和一个服务器）在彼此交换数据之前必须先建立一个TCP连接。在一个TCP连接中，仅有两方进行彼此通信。
- **TCP的可靠性**是针对UDP不可靠传输来说的，另外传输层下的IP层也是不可靠的。所以TCP的可靠性是指基于不可靠的IP层在传输层提供可靠的数据传输服务，主要是指传输数据不会损坏或丢失，而且所有数据都是按照发送顺序进行传送。
- 实现TCP的可靠传输有以下**机制**：
  1，校验和（校验数据是否损坏）；
  2，定时器（分组丢失则重传）；
  3，序号（用于检测丢失的分组和冗余的分组）；
  4，确认（接收方告知发送方正确接收分组以及期望的下一个分组）；
  5，否定确认（接收方通知发送方未被正确接收的分组）；
  6，窗口和流水线（用于增加信道的吞吐量）。
- 至于数据是否在中途被修改或者被窃听，这应该是属于安全性问题。提高安全性最根本的办法就是加密数据，比如远程登录用ssh而非telnet。